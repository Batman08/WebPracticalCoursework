{{#danceCourse}}
    <div class="text-center mb-4">
        <h1><i class="fa fa-book-open"></i> {{title}}</h1>
        <div><i class="fa-solid fa-clock"></i> Duration of <b>{{duration}}</b></div>
        <div>{{description}}</div>
    </div>
{{/danceCourse}}

<hr>

<div id="divBookingContainer" class="mt-4">

<div class="row">
    <div class="col-md-8 mx-auto">
        {{^user}}

            {{#successMessage}}
                {{#bookedClass}}
                    <div class="p-3 bg-success bg-opacity-10 border border-success border-2 border-top-0 border-bottom-0 border-end-0 rounded-end shadow mb-3" role="alert">
                        <h4 class="alert-heading"><i class="fas fa-check-circle me-2"></i>Booking Confirmed!</h4>
                        <p>Thank you, <strong>{{name}}</strong>. Your spot in <strong>{{title}}</strong> on <strong>{{classDateTime}}</strong> has been reserved.</p>
                        <hr>
                        <p class="mb-0">
                          <strong>Booking Reference:</strong>
                          <span class="text-monospace bg-light px-2 py-1 rounded border">
                            {{bookingReference}}
                          </span>
                        </p>
                        <p class="mt-3 mb-0 text-muted">
                          You can view or manage your booking anytime by entering your reference number on the <a href="/bookings" class="link-success fw-semibold">Bookings</a> page.
                        </p>
                        <div class="alert alert-light border-3 border-dark text-danger mt-3 mb-0 py-2 px-3">
                            <i class="fa-solid fa-circle-exclamation"></i> Please keep a note of your booking reference as it won’t be shown again.
                        </div>
                    </div>
                {{/bookedClass}}
            {{/successMessage}}

        {{/user}}

        {{#user}}

            {{#successMessage}}
                {{#bookedClass}}
                    <div class="p-3 bg-success bg-opacity-10 border border-success border-2 border-top-0 border-bottom-0 border-end-0 rounded-end shadow mb-3" role="alert">
                        <h4 class="alert-heading"><i class="fas fa-check-circle me-2"></i>Booking Confirmed!</h4>
                        <p>Thank you, <strong>{{name}}</strong>. Your spot in <strong>{{title}}</strong> on <strong>{{classDateTime}}</strong> has been reserved.</p>
                        <hr>
                        <p class="mt-3 mb-0 text-muted">
                          You can view or manage your booking anytime on the <a href="/bookings" class="link-success fw-semibold">Bookings</a> page.
                        </p>
                    </div>
                {{/bookedClass}}
            {{/successMessage}}

        {{/user}}

        {{#errorMessage}}
          <div class="p-3 bg-danger bg-opacity-10 border border-danger border-2 border-top-0 border-bottom-0 border-end-0 rounded-end shadow mb-3">
              <i class="fa-solid fa-xmark"></i> {{errorMessage}}
          </div>
        {{/errorMessage}}
    </div>
</div>


    {{^danceClasses}}    
        <div class="alert alert-info text-center shadow-sm" role="alert">
          <h4 class="alert-heading"><i class="fa-solid fa-circle-info"></i> No Classes Available</h4>
          <p>Currently, there are no classes available for this course. Please check back later.</p>
        </div>
    {{/danceClasses}}

    {{#danceClasses}}    

         <div class="row">
            <div class="col-lg-8 mx-auto mb-3">
              <div class="card shadow-sm rounded">
                <div class="card-header bg-light text-center">
                  <h4><i class="fa fa-chalkboard-user"></i> {{title}}</h4>
                </div>
                <div class="card-body">
                    <!-- Description -->
                    <div class="mb-4">
                      <h5><b>Description</b></h5>
                      <p>{{description}}</p>
                    </div>

                    <!-- Date & Time -->
                    <div class="mb-3">
                        <div><b>Date & Time&nbsp;:</b> {{classDateTime}}</div>
                    </div>
                    
                    <!-- Location -->
                    <div class="mb-3">
                        <div><b>Location&nbsp;:</b> {{location}}</div>
                    </div>
                    
                    <!-- Duration -->
                    <div class="mb-3">
                        <div><b>Duration&nbsp;:</b> {{duration}}</div>
                    </div>
                    
                    <!-- Price -->
                    <div class="mb-3">
                        <div><b>Price&nbsp;:</b> £{{price}}</div>
                    </div>
                    
                    <!-- Book Button -->
                    <div class="text-center">
                      <button class="btn btn-success btn-lg shadow-sm" data-btnBookClass data-danceClassId="{{_id}}"><i class="fa-solid fa-calendar-plus"></i> Book Class</button>
                    </div>
                </div>
              </div>
            </div>
        </div>
    {{/danceClasses}}

    {{#danceCourse}}
        {{>anon/course/guestBookingModalPartial}}
    {{/danceCourse}}

    
{{#danceCourse}}
    <div class="d-none" style="display: none;">
        <form id="formAccountUserBookClass" method="post" action="/course/{{_id}}" class="d-none" style="display: none;">
            <!-- Name -->
            <input type="text" class="form-control" id="inputName" name="name" placeholder="Name" maxlength="256" required>

            <!-- Email -->
            <input type="text" class="form-control" id="inputEmail" name="email" placeholder="Email" maxlength="256" required>

            <!-- Dance Class -->
            <input type="hidden" id="accountUserInputDanceClassId" name="danceClassId" value="">

            <!-- Action Type -->
            <input type="hidden" name="action" value="book_class">
        </form>
    </div>
{{/danceCourse}}
</div>


{{^user}}
    <script>
      document.addEventListener('DOMContentLoaded', () => {
        GuestBooking.Init_GuestUser();
      });
    </script>
{{/user}}

{{#user}}
    <script>
      document.addEventListener('DOMContentLoaded', () => {
        GuestBooking.Init_AccountUser("{{name}}", "{{email}}");
      });
    </script>
{{/user}}